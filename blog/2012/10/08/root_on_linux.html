<!DOCTYPE html>
<html lang='zh'>
        <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="//cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>root on linux</title>
</head>

<body>
        <div id="header">
    <nav class="navbar navbar-default" role="navigation">
                <div class="container-fluid">
                        <div class="navbar-header">
                                <a class="navbar-brand" href="/">CLOUD</a>
                        </div>
                        <div class="collapse navbar-collapse" id="example-navbar-collapse">
                                <ul class="nav navbar-nav">
                                        <li><a href="/tweet"><i class="icon-retweet icon-white"></i>Tweets</a></li>
                                        <li><a href="/archive.html"><i class="icon-book icon-white"></i>Archives</a></li>
                                        <li><a href="/category.html"><i class="icon-th-list icon-white"></i>category</a></li>
                                        <li><a href="/about.html"><i class="icon-user icon-white"></i>About</a></li>
                                        <li class="dropdown">
                                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                        Friend Links <b class="caret"></b>
                                                </a>
                                                <ul class="dropdown-menu">
                                                        <li><a href="http://www.ruanyifeng.com/home.html" target="_blank">阮一峰</a></li>
                                                        <li><a href="http://coolshell.cn/" target="_blank">陈皓haoel</a></li>
                                                        <li><a href="http://www.dbanotes.net/" target="_blank">冯大辉Fenng</a></li>
                                                        <li><a href="http://robbin.iteye.com/" target="_blank">范凯robbin</a></li>
                                                        <li><a href="http://www.eygle.com/" target="_blank">盖国强eygle</a></li>
                                                        <li><a href="http://blog.csdn.net/tianlesoftware" target="_blank">David Dai</a></li>
                                                        <li><a href="http://www.joelonsoftware.com/" target="_blank">Joel Spolsky</a></li>
                                                        <li><a href="http://mindhacks.cn/" target="_blank">刘未鹏MindHacks</a></li>
                                                        <li><a href="http://www.my1510.cn/author.php?roseluqiu" target="_blank">闾丘露薇</a></li>
                                                        <li><a href="http://www.dapenti.com/blog/" target="_blank">铂程斋dapenti</a></li>
                                                </ul>
                                        </li>
                                </ul>
                        </div>
                </div>
        </nav>
</div>


        <div id="content">
                <div class="container">
                        <div class="row">
                                <div>
                                        <div class="entry">
        <div class="entry entry-detail">
                    <div class="entry-header">
                            <h1 class="entry-title">root on linux</h1>
                            <div class="entry-meta">
                                    <span class="entry-by">
                                            <i class="icon-user"></i> <a href="/">dylan</a> on 2012-10-08 14:35:57
                                    </span>
                            </div>
                    </div>
                <div class="entry-content">
                        <h2>写在前面的话</h2>
<p>root是Unix/Linux的超级用户，拥有绝对的权力。拥有root权限，你尽可以随心所欲而不逾矩：你既是"矩"的制定者，也是"矩"的拥护者，当然稍有不慎，你也可能是"矩"的破坏者、毁灭者，因为若被滥用，则会引发异常崩溃，甚至导致绝对的腐败。</p>
<p>所以很多Unix/Linux教程都花了很大篇幅讲解系统权限，并强烈建议慎用root，而代之以普通用户，如anybody。这样当anybody试图做某些逾矩的操作时，会提示Permission Denied并无法执行，此时root制定的规则已经生效，并得到遵守，不管你是情愿，还是被迫。当然，若有需要，anybody也可以切换为root身份，前提是需要知道root的口令。</p>
<p>根据以上信息，我们至少可以从三个方面增强root安全。</p>
<h3>1. 高强度口令</h3>
<p>为root用户设置一个高强度的口令，大小写字母 + 数字 + 特殊字符，而且还要保证有足够的位数。</p>
<p>去年国内几大网站相继出现<a href="http://coolshell.cn/articles/6193.html">明文口令泄露事件</a>，有很多可供引以为戒。但我相信，很多用户依然还没有引起重视，不信可以去测试下你的密码强度：<a href="http://howsecureismypassword.net/">How Security Is My Password</a></p>
<h3>2. 创建普通用户</h3>
<p>使用root登录，新增用户anybody，并为anybody设置一定强度的密码。</p>
<pre><code>useradd anybody
passwd anybody
</code></pre>
<p>注：创建修改用户需要root权限。</p>
<h3>3. 限制su/sudo</h3>
<p>在Unix/Linux系统中，要获取其他用户的权限有两种方式，一是使用su(switch user)，切换成为某用户，这样就拥有了该用户的所有权限，直到退出该用户；另外一种是sudo(do as another user)，以另外一个用户的身份执行某些操作，此时在短时间内你获取该用户的权限，直到超时。</p>
<p>当然，su/sudo的细节可以由root进行控制。</p>
<h4>限制只有wheel组的用户可以使用su</h4>
<p>编辑/etc/pam.d/su文件，启用用户组认证：</p>
<pre><code># Uncomment the following line to require a user to be in the "wheel" group.

auth            required        pam_wheel.so use_uid
</code></pre>
<p>将普通用户anybody添加到wheel组，wheel的gid为10</p>
<pre><code>usermod -G 10 anybody
</code></pre>
<p>这样就只有该用户和root可以使用su。</p>
<h4>限制普通用户使用sudo</h4>
<p>sudo主要配置在/etc/sudoers，新增加的用户默认没有添加到sudoers中，若有需要，可以参照配置中说明更改。</p>
<p>比较通用的做法是定制一些可以执行或禁止执行的命令集，而允许执行的命令集足以完成系统的日常维护工作，禁止执行的命令集可能会使系统暴露不够安全，然后将这些命令集授权给该用户，这样既分配适当权限，又作特殊限制。</p>
<p>当然，root涉及到系统安全远不止这些，以上仅是本站使用的一些策略，更详细的信息有待进一步理解和实践。</p>
<h2>延伸阅读</h2>
<ul>
<li><a href="http://www.ibm.com/developerworks/cn/linux/security/l-ossec/part1/">Linux系统安全(一):安装与设置</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/l-cn-rootadmin2/index.html">权限安全使用和密码管理</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/l-pam/">了解和配置PAM</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/aix/library/au-sudo/">充分发挥sudo的作用</a></li>
</ul> 
                </div>
        </div>
</div>

                                </div>
                        </div>
                </div>
        </div>
        <div id="footer">

        <div class="modal-footer">
                <p class="text-center">
                        Blog of <a href="/">dylan</a>.
                        Follow me on <a href="https://twitter.com/dylanninin" target="_blank">twitter</a>
                        or <a href="http://weibo.com/dylanninin" target="_blank">weibo</a>
                </p>
                <p class="text-center">
                        UI Designed by <a href="http://twitter.github.com/bootstrap" target="_blank">Twitter
                                Bootstrap</a>.
                        Powered by <a href="http://webpy.org" target="_blank">Web.py</a>.
                        Hosted by <a href="http://www.linode.com" target="_blank">Linode</a>.
                        Licensed under <a
                                href="http://creativecommons.org/licenses/by-nc-nd/3.0/" target="_blank">CC BY
                                3.0</a>
                </p>
                <p class="text-center">
                        Copyright &copy <a href="/">CLOUD</a> |
                        <a href="/about.html">About</a>
                </p>

        </div>
        <script src="/static/js/jquery.js"></script>
        <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap.js"></script>
</div>

</body>
</html>
